FROM docker/compose

RUN apk update && apk add python3-dev curl
RUN pip3 install python-owasp-zap-v2.4

RUN mkdir -p /results

COPY ./entrypoint.sh /
RUN chmod +x /entrypoint.sh

WORKDIR /app
COPY ./pen-test-app.py .
COPY ./wait-for-it.sh .
RUN chmod +x ./wait-for-it.sh

ENTRYPOINT [ "sh", "/entrypoint.sh" ]